## 摘要

​	2020年上半年，一场疫情首先袭击了中国，之后是全世界，所有人的生活收到了不同程度的影响，直至今日，疫情仍未褪去。在这场与疫情的持久战中，人们每天的生活都与疫情息息相关。在出行前需要获取目的地的疫情信息，并且数据需要实时更新。为了增强数据的可读性，我们制作了可视化图形界面。为了方便数据的添加和修改，我们制作了数据管理界面，方便随时对整体数据做出修改。为了方便管理人人员实时更新数据，我们完成了完整的用户权限管理系统，方便管理员实时更新同步数据。

## 1 项目简介

​	新冠疫情可视化分析系统(COVID-19 DashBoard)是一个对中国各省疫情数据管理修改及数据可视化系统。用户访问该系统可以获取中国国内所有省的疫情数据，数据内容包括指定省的疫情每月新增人数，每月新增疑似人数，每月新增治愈人数，以及每月新增死亡人数。数据可视化界面展示了中国疫情地图以及自疫情发生以来，各省的历史数据。具体包括历史每日新增人数折线图，各省当前确诊人数排名柱状图，历史死亡和治愈数据折线图，治愈率和死亡率扇形图，以及当前全国疫情实时地图。数据由相关管理人员录入，并且可以实时更新。为此，设计了数据管理界面和用户管理界面，相关管理人员可以同步当前数据，修改错误数据，以及对所有数据查询。对于管理员，制作了用户管理界面，可以新增，删除管理员。经过两周的开发，项目最终在腾讯云完成部署并上线。用户可以通过公网直接访问。在此项目中，我主要承担后端框架搭建，数据处理，页面设计，接口编写等任务。

### 1.1 项目背景

​	2019新型冠状病毒，2020年1月12日被世界卫生组织命名为2019-nCoV，2020年2月11日被国际病毒分类委员会命名为SARS-CoV-2。美国《科学》杂志网站12日报道说，国际病毒分类学委员会冠状病毒研究小组主席约翰·齐布尔表示，他们是根据基因测序等方面的分类学研究提出这个名称，“这一名称与SARS疾病之间没有关联”。钟南山院士9日在接受媒体采访时也曾表示，新型冠状病毒与SARS冠状病毒是同一类，但不是同一种。

​	冠状病毒是一个大型病毒家族，已知可引起感冒以及中东呼吸综合征（MERS）和严重急性呼吸综合征（SARS）等较严重疾病。新型冠状病毒是以前从未在人体中发现的冠状病毒新毒株。

​    2019年12月以来，湖北省武汉市持续开展流感及相关疾病监测，发现多起病毒性肺炎病例，均诊断为病毒性肺炎/肺部感染。

人感染了冠状病毒后常见体征有呼吸道症状、发热、咳嗽、气促和呼吸困难等。在较严重病例中，感染可导致肺炎、严重急性呼吸综合征、肾衰竭，甚至死亡。目前对于新型冠状病毒所致疾病没有特异治疗方法。但许多症状是可以处理的，因此需根据患者临床情况进行治疗。此外，对感染者的辅助护理可能非常有效。

​	直至2022年4月，疫情仍未褪去，部分省每日仍然有大量新增病例。全球仍笼罩在新冠的阴影中。

### 1.2 项目意义

​	当疫情发生后，及时掌握扩散的范围和带病人数，是制定防疫方案的重要前提。如果对发病人数和范围不及时掌握，那直接的后果就是病毒扩散扩散再扩散。今天的局面，我想其中一个主要原因就是年初对疫情的情况没有一个真实而直观的认识，导致对疫情发展的有所轻视而造成的。

​	所以在疫情实时监控的方案中，除了数据的真实和实时性外，可视化也是一个非常重要的要素。而我们今天看到，各卫建委每天的疫情发布中，还是采用文字描述的形式，缺少可视化面板。

## 2 数据收集

​	数据来自于github上开源项目，数据首次发布在丁香园，之后由python爬虫每分钟获取一次数据，储存在MongoDB中，并且保存所有历史数据的更新。之后由程序每晚12点推送到github仓库中。

​	我们使用了此开源项目在4月20日提供的数据，其中包含全球所有国家及其地区自2019年12月起所有的疫情数据，包含确诊人数，疑似人数，死亡人数，治愈人数共计86万条数据。拿到数据之后我们对数据做了筛选，从86万条数据中筛选出了中国自2019年12月至2022年4月20日的数据，并且只保留了各个省的数据。最后保留数据6000多条，作为此次项目的数据集。

## 3 整体架构

​	项目为标准web项目，分为前端数据交互和后端请求处理。由Java语言完成后端编写，使用bootstrap完成网页构建，使用ajax发送请求实现前后端分离。

​	其中后端框架主要使用springboot2.6.7和mybatis-plus3.5.1，也是我在此次项目中负责的部分。

## 4 实现功能

### 4.1 数据看板

​	数据可视化界面，展示的数据包括：

- 卡片型当前全国疫情确诊人数，疑似确诊人数，死亡人数，治愈人数

- 中国地图，地图中显示每个省详细数据，包括每个省最新的疫情确诊人数，疑似确诊人数，死亡人数，治愈人数
- 扇形图，内容为新冠总体治愈率、死亡率
- 柱状图，显示中国31省最近更新的确诊数排名
- 面积图，显示自2019年12月以来历史每月确诊人数
- 折线图，显示自2019年12月以来历史确证人数和治愈人数

### 4.2 用户管理

​	完成用户注册、登陆、退出功能及界面。

​	完成管管理功能，管理当注册的用户，包括删除用户，修该用户信息，修改用户权限。

### 4.3 数据管理

​	数据管理界面及功能

	1. 管理全部的疫情相关数据，包括添加疫情数据，删除疫情数据，修改错误数据，获取所有数据。
	1. 管理特定省的疫情相关数据，包括添加疫情数据，删除疫情数据，修改错误数据。

## 5 使用技术

### 5.1 bootstrap 3

​	bootstrap是一组用户网站开发的开源前端框架，提供了一套美观的css样式以及由javascript控制的组件

​	我们使用bootstrap完成了页面网格化处理，使用了css样式美化网页内按钮，下拉菜单，导航栏等的图标设计。完成了登陆、注册、以及管理界面的设计

### 5.2 ajax jQuery

​	ajax（Asynchronous JavaScript and XML），使用异步的javascript语言在不重新加载整个页面的情况下，与服务器完成数据交换并更新网页内容。

​	jQuery是一个javascript库，用户简化HTML与javascript之间的操作。使用jQuery和jQuery封装之后的ajax，极大的简化了ajax的使用，使发送请求、数据回显、数据交互、页面内容修改更容易。

​	我们在前端使用jQuery来获取页面内容和事件，使用ajax向后端发起请求，并对返回的结果做数据处理，最终由jQuery显示在网页上。基于此，我们完成了注册登陆界面的请求发送、管理界面的数据添加修改请求发送，数据显示、数据看板界面的请求发送。

### 5.3 Echarts

​	Echarts是一个可视化图表库，包含了丰富的可视化内容，提供了折线图、柱状图、饼图、地图等科室户组件。

​	使用此javascript，我们完成了数据可视化界面的制作。

### 5.4 springboot 2.6.7

​	springboot是一套轻量化的企业级web应用开发框架，具有易于部署、高可扩展性、兼容性的特点。相比spring和springMVC，springboot极大的简化了对于项目整体的配置，使开发人员能尽快进入网站的开发阶段，从而减少在整体框架搭建上的时间花费。

​	springboot继承了spring的ioc和aop，ioc（Inversion of Control），即控制反转，将对象的创建及销毁都交由spring管理，降低代码耦合度，方便查找问题和和开发维护。

​	springboot对junit有很高的支持度，方便了随时对程序、方法、函数的测试。及时的测试能尽早发现代码问题并及时做出修改，从而防止对于后续的开发产生影响

​	我们使用springboot这一优秀框架完成了整体项目的搭建，完整了mapper、service、controller三层结构的编写。同时使用springbootTest对所有utils，servces的方法做了测试，确保无误。使用springboot-web完成了请求获取及数据处理及返回，页面请求跳转等关键功能。使用集成mabatis mybatisplus完成mapper层的编写，并完成了测试。

### 5.5 mysql 8.0

​	mysql是一套开源的关系型数据库，是数据持久化保存的载体。

​	借助mysql数据库，在数据库范式的约束之下，根据本次项目的主题，我们首先完成ER图的设计，之后完成了PDM图设计，最终导入了80万条的数据。借助IDEA的数据库管理软件，完成了数据的筛选，去重，清除异常数据等操作。

​	我们将数据库部署在了服务器上，方便小组成员同时访问和同步进度。

### 5.6 mybatis mybatisplus

​	mybatis是一个优秀的持久层框架，具有轻量化易学习的提点，相比于原生JDBC，减少了50%的代码量，借助mybatis可以轻易的完成Java同数据库的数据操作，将SQL代码和Java代码分离开来，减少了代码耦合度。

​	mybatisplus是对mybatis的增强，相比于mybatis，使用mybatisplus省略了大量重复性代码，在继承的BaseMapper里，mybatisplus以及完成了单表的CRUD操作，大量的节省了开发人员的时间，使开发人员不再需要进行简单且重复的CRUD操作，转而把更多的经历放在复杂的SQL或业务逻辑上，在mybatis的基础上，去除了了所有的单表操作，进一步减少了65%的代码量。并且mybatisplus还提供了许多重要功能，例如逻辑删除、代码生成、自动分页等。

​	使用mybatis我们完成了8条复杂逻辑的SQL编写。项目中，数据看板中数据都有这8条复杂逻辑的SQL从数据库获取。

​	使用mybatisplus我们完成了三张表的所有单表查询，总计超过20条查询。借助BaseMapper，提供的方法，跳过了单表的SQL编写。使用mybatisplus的逻辑删除功能，完成了用户数据的逻辑删除操作。

### 5.7 pagehelper

​	pageHelper是适配mybatis的分页插件，借助pageHelper可以简单快的的完成分页查询操作，开发只需要输入需要的页码和需要数据的数目就可以直接输出对应的数据，该插件可以自动拼接SQL完成Limit分页查询的操作。相比于原生手动完成的limit分页查询操作，pagehelper直接提供了该方法，简化开发，简化业务逻辑的实现

​	使用pageHelper，我们完成了疫情数据管理界面和用户数据管理界面的数据分页查询操作。	

### 5.8 其他

#### 5.8.1 fastjson

​	fastjson是由阿里巴巴开发的JSON库，用于对JSON格式的数据进行解析和打包。

​	因为前后端交互使用json格式文本，所以我们使用fastjson来讲Java Bean序列化成JSON字符串。除此之外，在将Date类型数据序列化是也使用了fastjson，用来格式化日期。

#### 5.8.2 Lombok

​	lombok提供了一套注解，使用这些注解，简化了一些必须有但意义简单的代码，减少了代码量，同时提高了代码可读性。

​	本次项目中大量使用了@Data、@NoArgsConstructor、@AllArgsConstructor用于代替getter、setter、toString、构造方法等方法。

#### 5.8.3 Tencent COS

​	Tencent COS是腾讯云的对象存储服务。对象存储是指将数据作为对象进行管理，每个对象被分割成数个元数据和一个全局唯一标识符的分布式存储系统。

​	我们使用Tencent COS来存放网页的静态资源，有了Tencent COS和CDN加速服务器，这些静态资源就不需要从服务器获取，服务器只需要专注于数据传输，从而减少了服务器带宽压力，提升了服务器请求访问速度。

#### 5.8.4 Tencent Sms

​	Tencent Sms是腾讯的短信服务。Tencent Sms可以为用户提供稳定、安全、合规的短信发送服务。

​	使用Tencent Sms我们完成了用户注册时的手机验证业务。用户在注册时，会被要求使用手机号，并且会收到一条短信验证码，只有用户发送的验证码与服务器发送的验证码相同时才允许注册。验证码会暂时被储存在服务器session中，并且随着session销毁而销毁。

## 6 使用工具

### 6.1 idea

​	idea是一款全能的代码开发软件，我们使用idea完成了全部的代码开发、编译、运行、测试、打包。

### 6.2 apipost6

​	apipost是一款后端接口调试工具，支持多种Http请求发送和团队协作。

​	使用apipost，我们测试了后端的每一个接口，测试无误之后同步给小组前端开发人员，方便前端开发更好了解接口请求方式以及数据交互内容、格式。在此次项目中，我们总共完成了30多个接口的开发和测试。

### 6.3 maven

​	项目使用springboot和mybatis为基本框架，以及大量第三方包，总计超过50个jar文件。如果手动管理这些jar文件，费时费力。maven是一款项目管理与构建工具，在项目创建时，maven已经自动接管了所有jar文件的管理，所有的jar文件都来自maven中心仓库，所有的版本都有maven直接控制，防止出现版本依赖或错误问题。同时maven还有自动构建功能。

​	此次项目我们使用了maven作为包管理工具，借助maven，小组成员的协作也更方便，组长在构建项目之后，无须将项目所需jar包同步给组员，而只需要同步pom.xml文件，组员会自动从中心仓库拉去所需jar包。同时还使用了maven的构建工具将整个项目打包成jar文件用于部署到服务器。

### 6.4 git

​	git是一个开源的分布式版本控制系统，用于敏捷高效地处理项目，包括同步，版本控制，代码审查等。

​	我们使用了gitee作为代码托管平台，使用不同的分支进行开发，推送之后需要pull request由组长完成代码审查和测试，截止本次项目完成，gitee上总共托管超过70余文件，提交数超过90多次，分支合并超过30余次。

### 6.5 腾讯轻量应用服务器

​	本次项目部署在腾讯轻量应用服务器，配置公网ip，端口为8090，服务器使用windows server操作系统。由于技术原因，目前暂未实现反向代理，使用域名访问，仅能使用ip访问。

​	每次项目有重大进展时都会使用maven单独构建打包一个服务器版本的jar文件，并发布在服务器上，截止项目完成，共发布了5个SNAPSHOT版本和2个Release版本。

## 7 结论

### 6.1 创新与特色

​	我们将政府文档里，新闻发布会里的数据做成可视化的图表，直观地传达疫情数据的大小，将数字转换成图表，进而有效的传达与沟通信息。让普通人可以从不同维度观察数据，从而了解到新冠疫情对人民生活的确切影响，增加加强对新冠的预防。

​	使用了最新的技术，以简化开发，减少重复代码，增强代码可读性为目的，引入了众多工具、框架等。

### 6.2 总结

​	截止到今天，Java实训已经结束了，我作为小组的组长，带领组员不断进步，最终经过一个多月的学习和一周的开发，最终完成了这个项目。这个项目仍不完美，有很多可以修改和优化的地方，也有一些当初设计了但最终由于时间和技术原因没能完成的功能。从html开始到java再到webApplication，每天都有学到新的东西，本着无限进步的精神，我也自学了很多课堂之外的内容，从mybatis到mybatisplus，从spring到springboot，从git到maven。最终这些技术都在这次项目里的到了使用。

​	从这次实训和这个项目中，让我学习到团队协作的重要性，个人的力量是薄弱的，小组的力量是强大的，这次项目的完成离不开小组每位成员的参与与努力。同时也让我了解到工具的重要性，熟练的使用好工具，可以极大的提升效率和容错率，从动态sql到gitee pull Request，在到maven和mybatisplus的使用，在老师教学的基础上，我们不断扩展，不断学习，无限进步。

